# Test configuration file in TOML format.
version = "1.0"
region = "ap-southeast-2"

# Optionally configure port and host, or specify via daemon CLI options
# host = 0.0.0.0
# port = 443

# Enable verbose debugging
# debug = false

# Optionally configure base-path if full directory path not defined for "fs" buckets
# base_path = "/home/predastore/data/"

# Badger database directory
#badger_dir = "s3/tests/data/distributed/db"

# Specify reed solomon encoding
[rs]
data = 3
parity = 2

# Distributed database nodes for global state (bucket/object metadata)
# When [[db]] is defined, s3d uses the distributed Raft-based s3db cluster.
# When not defined, s3d auto-launches a default embedded database on 127.0.0.1:6660.
#
# CLI usage:
#   ./s3d -db -db-node 1          # Run only DB node 1
#   ./s3d -backend distributed    # Run S3 + embedded DB (if no [[db]] defined)
#
#[[db]]
#id = 1
#host = "0.0.0.0"
#port = 6660
#raft_port = 7660   # Optional: Raft consensus port (default: port + 1000)
#path = "s3/tests/data/distributed/db/node-1/"
#access_key_id = "AKIAIOSFODNN7EXAMPLE"
#secret_access_key = "wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY"
#leader = true      # Bootstrap leader hint

#[[db]]
#id = 2
#host = "0.0.0.0"
#port = 6661
#path = "s3/tests/data/distributed/db/node-2/"
#access_key_id = "AKIAIOSFODNN7EXAMPLE"
#secret_access_key = "wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY"

#[[db]]
#id = 3
#host = "0.0.0.0"
#port = 6662
#path = "s3/tests/data/distributed/db/node-3/"
#access_key_id = "AKIAIOSFODNN7EXAMPLE"
#secret_access_key = "wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY"


[[nodes]]
id = 1
host = "0.0.0.0"
port = 9991
path = "s3/tests/data/distributed/nodes/node-1/"

[[nodes]]
id = 2
host = "0.0.0.0"
port = 9992
path = "s3/tests/data/distributed/nodes/node-2/"

[[nodes]]
id = 3
host = "0.0.0.0"
port = 9993
path = "s3/tests/data/distributed/nodes/node-3/"

[[nodes]]
id = 4
host = "0.0.0.0"
port = 9994
path = "s3/tests/data/distributed/nodes/node-4/"

[[nodes]]
id = 5
host = "0.0.0.0"
port = 9995
path = "s3/tests/data/distributed/nodes/node-5/"

[[nodes]]
id = 6
host = "0.0.0.0"
port = 9996
path = "s3/tests/data/distributed/nodes/node-6/"

[[nodes]]
id = 7
host = "0.0.0.0"
port = 9997
path = "s3/tests/data/distributed/nodes/node-7/"

[[buckets]]
name = "datastore"
region = "ap-southeast-2"
type = "distributed"
public = false
encryption = ""

[[buckets]]
name = "videos"
region = "ap-southeast-2"
type = "distributed"
public = false
encryption = ""

[[auth]]
access_key_id = "AKIAIOSFODNN7EXAMPLE"
secret_access_key = "wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY"
account_id = "123456789012"
policy = [
  { bucket = "datastore", actions = ["s3:ListBucket",  "s3:GetObject", "s3:PutObject", "s3:DeleteObject", "s3:ListAllMyBuckets"] },
  { bucket = "videos", actions = ["s3:ListBucket",  "s3:GetObject", "s3:PutObject", "s3:DeleteObject", "s3:ListAllMyBuckets"] },
]
